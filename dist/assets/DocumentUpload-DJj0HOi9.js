import{j as e,aK as i,aM as t,T as r,w as s,bb as a,Y as n,L as d,y as o,I as c,aS as l,ab as u,bc as h,ac as m,bd as p}from"./mui-vendor-Cj1s4jkd.js";import{a as x}from"./react-vendor-YkhZaqhD.js";const j=({onDocumentChange:j,documents:g,errors:v})=>{const[f,y]=x.useState({}),b=async(e,i)=>{for(const r of e)if(r.size>5242880)alert(`Le fichier ${r.name} dépasse la taille maximale autorisée (5MB)`);else{y(e=>({...e,[i]:0}));try{const e=new FileReader;e.onload=async e=>{y(e=>({...e,[i]:100})),j(i,{name:r.name,type:r.type,data:e.target.result})},e.onprogress=e=>{if(e.lengthComputable){const t=e.loaded/e.total*100;y(e=>({...e,[i]:t}))}},e.readAsDataURL(r)}catch(t){y(e=>({...e,[i]:0}))}}};return e.jsx(i,{container:!0,spacing:3,children:[{id:"idCard",label:"Pièce d'identité",description:"Carte d'identité ou passeport (recto/verso)",required:!0},{id:"drivingLicense",label:"Permis de conduire",description:"Permis de conduire en cours de validité (recto/verso)",required:!0},{id:"vehiclePhotos",label:"Photos du véhicule",description:"Photos de l'état du véhicule",required:!0,multiple:!0}].map(x=>e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(t,{sx:{p:2,height:"100%"},children:[e.jsxs(r,{variant:"subtitle1",gutterBottom:!0,fontWeight:"500",children:[x.label,x.required&&" *"]}),e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:x.description}),g[x.id]?e.jsx(n,{sx:{mt:2},children:e.jsx(d,{dense:!0,children:e.jsxs(o,{secondaryAction:e.jsx(c,{edge:"end",onClick:()=>j(x.id,null),children:e.jsx(l,{})}),children:[e.jsx(u,{children:e.jsx(h,{})}),e.jsx(m,{primary:g[x.id].name,secondary:v[x.id]?e.jsx(r,{variant:"caption",color:"error",children:v[x.id]}):"Document chargé"})]})})}):e.jsx(s,{variant:"outlined",startIcon:e.jsx(a,{}),onClick:()=>(e=>{const i=document.createElement("input");i.type="file",i.accept=".pdf,.jpg,.jpeg,.png",i.multiple="vehiclePhotos"===e,i.onchange=i=>{const t=Array.from(i.target.files);b(t,e)},i.click()})(x.id),fullWidth:!0,sx:{mt:2},children:"Sélectionner un fichier"}),f[x.id]>0&&f[x.id]<100&&e.jsx(n,{sx:{mt:1},children:e.jsx(p,{variant:"determinate",value:f[x.id]})})]})},x.id))})};export{j as default};
